<html>
	<head>
		<title>Bouquet Management System- home</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"crossorigin="anonymous"></script>
	</head>
	<style>
	.Heading { background-color: #3a8bcd;
	text-align: center;
	}
	.tablestyle { background-color: #dce0df;
	text-align: center;
	}
	.blackbg{ background-color: #dce0df;
	
	}
	nav{padding-top:"30px";}
	</style>
	<body class="d-flex flex-column h-100 container blackbg">
		<h1 class="Heading">TCET Bouquet Management App</h1>
		<header>
			<nav  class="navbar navbar-expand-lg navbar-dark" style="background-color: #5e6363;">
			  <div class="container-fluid">
				<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
				  <div class="navbar-nav">

						 <li class="nav-item">
			        <a class="nav-link active" aria-current="page" href="#">Listing</a>
			      </li>
			      <li class="nav-item">
			        <a class="nav-link" href="./add.html">Add New</a>
			      </li>


			    &nbsp;&nbsp;

			   <li class="nav-item dropdown">

			   		<div class="input-group mb-3">
									<label class="input-group-text" for="sort">Sort By</label>
									<select class="form-select" id="sort">
									  <option selected>Choose...</option>
									  <option value="title">title</option>
									  <option value="color">color</option>
									  <option value="availability">availability</option>
									  <option value = "price">price</option>
									</select>
							</div>

        </li>


        	&nbsp;&nbsp;

			   <li class="nav-item dropdown">

			   		<div class="input-group mb-3">
									<label class="input-group-text" for="order">Order</label>
									<select class="form-select" id="order">
									  <option selected>Choose...</option>
									  <option value="Ascending">Ascending</option>
									  <option value="Descending">Descending</option>
									</select>
							</div>

        </li>


        		&nbsp;&nbsp;
        		<li class="nav-item">

        			<div class="input-group mb-3">
								  <span class="input-group-text" id="inputGroup-sizing-default">Limit</span>
								  <input type="number" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id = "limit">
							</div>

			      </li>



			     &nbsp;&nbsp;
			     <li class="nav-item">

        			<div class="input-group mb-3">
								  <span class="input-group-text" id="inputGroup-sizing-default">Color</span>
								  <input type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id = "color">
							</div>

			      </li>


			      &nbsp;&nbsp;&nbsp;
			      <li class="nav-item">

			      	<button class="btn btn-primary" type="submit" onclick = "filterHandler()">Apply</button>

			      </li>


				  </div>
				</div>
			  </div>
			</nav>
		</header>
		<table class="table table-striped table-hover text-center tablestyle">
			<thead>
				<th>Title</th>
				<th>Color </th>
				<th> Availability </th>
				<th> Price </th>
				<th> Image </th>
				<th> Action </th>
			</thead>
			<tbody id="tbody">
				
			</tbody>
			<tfoot>
				
			</tfoot>
		</table>

<!--<a href = 'click' onclick = handleClick(event) data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo">Open modal for @mdo</a>-->

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      	<img id = "image_show_modal" src = "sample.jpg" height="450" width="450" class="img-responsive center-block">
      </div>
    </div>
  </div>
</div>

		
	</body>
	
	<script src="./script.js"></script>
	<script>
		

		getData();



		function filterHandler()
		{
			 var srt = document.getElementById("sort").value;
			 var ord_s = document.getElementById("order").value;
			 var limit = Number(document.getElementById("limit").value);
			 var ord = (ord_s === "Descending") ? -1 : 1;
			 var clr = document.getElementById("color").value;


			 console.log(srt,ord_s,limit,ord,clr)



			  var  param = {};


			 if(!(srt === "Choose..."))param.sort = srt;
			 if(limit)param.limit = limit;
			 if(ord) param.order = ord;
			 if(clr) param.color = clr;

				
			 // if(srt === "Choose...")

			 	const params = new URLSearchParams(param);
				console.log(params.toString());

				var appnd  = params.toString();

				var lnk = 'flowers/find?' + appnd;

				fetch(api_url + lnk,{
					method:"GET"
				})
				.then((response) => response.json())
				.then((result) =>{

					console.table(result.data);
					loadData(result.data);

				})


		}

	</script>
</html>
